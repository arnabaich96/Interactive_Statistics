---
title: "Random Variable"
author: "Arnab Aich"
output: 
  html_document:
    self_contained: yes
    toc: true
    toc_float: true
    toc_depth: 3
    theme: cerulean
---
<link rel="stylesheet" type="text/css" href="../styles.css">

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, comment = NA, warning = FALSE, message = FALSE,fig.align = 'center',out.width = '100%')
library(shiny)
library(kableExtra)
```

## Definition and Example

- A **random variable** (RV) is a variable whose possible values are outcomes of a random experiment.
  - *Example*: Rolling a six-sided die.
    - The random variable (**X**) can take on values from 1 to 6.
  - *Example*: Rolling two six-sided die.
    - The random variable (**Y**) indicates sum of two face values (2 to 12).
    
```{r}
# plot showing sum of two die rolls in 100 rolls
set.seed(123)
die1 <- sample(1:6, 1e5, replace = TRUE)
die2 <- sample(1:6, 1e5, replace = TRUE)
sum_die <- die1 + die2
barplot(table(sum_die)/length(sum_die), main = "Sum of Two Die Rolls", ylab = "Probability", col = "purple", border = "white"   )
 
prob_table = t(table(sum_die)/length(sum_die))
rownames(prob_table) <- "$P(X=x)$"
```

Probabilty Distribution of random variable $Y$ representing sum of two die rolls:

```{r}
prob_table %>%
  round(3) %>%
  kbl(align = "c") %>%
  kable_styling(full_width = FALSE, position = "center", bootstrap_options = "striped") %>%
  row_spec(0, bold = TRUE, color = "white", background = "#7C0A02") %>%
  row_spec(1, background = "lightblue")
```

- Random variables can be:
  
  - **Discrete**: Can take on a countable number of values (e.g., die rolls).
  
  - **Continuous**: Can take on an infinite number of values within a range (e.g., IQ scores).



## Discrete Random Variable

- Suppose we roll a six-sided die $1000$ times and record the results. Let us consider $X$ be a random variable indicating the face value obtained on each roll. 
  - We will now calculate probabilities and show the frequency and relative frequency tables.

```{r, echo=FALSE}
# Simulating biased die rolls
set.seed(123)
biased_die_rolls <- sample(1:6, size=1000, replace=TRUE, prob=c(0.15, 0.15, 0.35, 0.1, 0.1, 0.05))

# Creating frequency and relative frequency tables
biased_freq_table <- table(biased_die_rolls)
biased_rel_freq_table <- prop.table(biased_freq_table)

# Displaying the frequency table with improved visualization and centered alignment
biased_die_df <- data.frame("Face" = names(biased_freq_table), 
                            "Frequency" = as.vector(biased_freq_table), 
                            "Rel_Freq" = as.vector(biased_rel_freq_table))


# Displaying table with knitr
library(knitr)
library(kableExtra)

biased_die_df %>%
  kbl(align = "c") %>%
  kable_styling(full_width = FALSE, position = "center", bootstrap_options = "striped") %>%
  row_spec(0, bold = TRUE, color = "white", background = "#7C0A02") %>%
  row_spec(1:nrow(biased_die_df), background = "lightblue")
```


Calculating Probabilities of the following events:

- Probabity of obtaining a face value less than or equal to $2$ is calculated as:
  - $P(X \leq 2) = P(X = 1) + P(X = 2)$
  - Using relative frequencies from the table:
  - $P(X = 1) = 0.17, P(X = 2) = 0.163$
  - **$P(X \leq 2) = 0.17 + 0.163 = 0.363$**

- Probabity of obtaining a face value more than $4$ is calculated as:
  - $P(X > 4) = P(X = 5) + P(X = 6)$
  - Using relative frequencies from the table:
  - $P(X = 5) = 0.10, P(X = 6) = 0.05$
  - **$P(X > 4) = 0.117 + 0.06 = 0.123$**
- Probability of obtaining an even face value ?
- Probability of obtaining a prime face value ?



## Summary Statistics of a Discrete Random Variable

- **Mean (Expected Value)** of a discrete random variable X is given by:
  - *$E(X) = \Sigma [x \cdot P(X = x)]$*
  - The calculation for the biased die example:
  

```{r}
# Load required library
library(kableExtra)

# First table data
biased_die_table_1 <- data.frame(
  `Die Face (X)` = 1:6,
  `P(X = x)` = c(0.15, 0.15, 0.35, 0.10, 0.10, 0.05),
  `X * P(X = x)` = c(0.15, 0.30, 1.05, 0.40, 0.50, 0.30)
)


# Display the table with center alignment and garnet header
kable(biased_die_table_1, align = "c", row.names = FALSE,col.names = c(
  "Die Face (X)", 
  "$P(X = x)$", 
  "$X * P(X = x)$")) %>%
  kable_styling(full_width = FALSE, bootstrap_options = c("striped", "hover", "condensed"), position = "center") %>%
  row_spec(0, bold = TRUE, color = "white", background = "#7C0A02") %>%
  row_spec(1:nrow(biased_die_table_1), background = "lightblue")


```

- $E(X) = 0.15 + 0.30 + 1.05 + 0.40 + 0.50 + 0.30 = 2.70$

- **Variance** of a discrete random variable X is given by:
  - *$Var(X) = \Sigma [(x - E(X))^2 \cdot P(X = x)]$*
  - The calculation for the biased die example:
  
  
```{r}
# Load required library
library(kableExtra)

# Second table for variance calculation
biased_die_table_2 <- data.frame(
  `Die Face (X)` = 1:6,
  `P(X = x)` = c(0.15, 0.15, 0.35, 0.10, 0.10, 0.05),
  `(X - E(X))^2` = c(2.89, 0.49, 0.09, 1.69, 5.29, 10.89),
  `(X - E(X))^2 P(X = x)` = c(0.43, 0.07, 0.03, 0.17, 0.53, 0.54)
)


# Display the table with center alignment, proper LaTeX, and garnet header
kable(biased_die_table_2, align = "c", col.names = c(
  "Die Face (X)", 
  "$P(X = x)$", 
  "$(X - E(X))^2$", 
  "$(X - E(X))^2 P(X = x)$"
), escape = FALSE) %>%
  kable_styling(full_width = FALSE, bootstrap_options = c("striped", "hover", "condensed")) %>%
  row_spec(0, bold = TRUE, color = "white", background = "#7C0A02") %>%
  row_spec(1:nrow(biased_die_table_2), background = "lightblue")
 
```


- **$Var(X) = 0.43 + 0.07 + 0.03 + 0.17 + 0.53 + 0.54 = 1.77$**

- **Standard Deviation (SD)** is the square root of the variance:
  - **$SD(X) = \sqrt{Var(X)} = \sqrt{1.77} = 1.33$**


## Continuous Random Variable (Area Under Curve)

Let’s consider a continuous random variable representing **heights of adult males** in a given population. We have collected heights of $1000$ individuals. We sort them in a frequency table and draw a histogram. A **Density curve** can be obtained by joining the middle point of each bin.

We are interested in calculating the following probabilities using this hypothetical data:

**P(height < 165 cm)**: The probability of selecting an individual shorter than 165 cm.

**P(height > 185 cm)**: The probability of selecting an individual taller than 185 cm.

**P(165 cm ≤ height ≤ 185 cm)**: The probability of selecting an individual whose height falls between 165 cm and 185 cm.
These probabilities can be idenfied using the area under the density curve.


```{r, echo=FALSE}
# Simulating height data (dynamically generated based on seed)
height_data <- rnorm(1000, mean=175, sd=10)

# Dynamic histogram and density plot
hist(height_data, breaks=20, prob=TRUE, col="lightblue", main="Height Distribution: Histogram and Density", xlab="Height (cm)", border="white")
lines(density(height_data), col="darkblue", lwd=2)
```

```{r, echo=FALSE}
# Dynamic density plot with highlighted areas

# P(height < 165)
plot(density(height_data), col="darkblue", lwd=2, main="P(Height < 165 cm)", xlab="Height (cm)")
polygon(c(min(height_data), seq(min(height_data), 165, length=100), 165), 
        c(0, dnorm(seq(min(height_data), 165, length=100), mean=175, sd=10), 0), 
        col=rgb(0.2, 0.8, 0.5, 0.3), border=NA)

# P(height > 185)
plot(density(height_data), col="darkblue", lwd=2, main="P(Height > 185 cm)", xlab="Height (cm)")
polygon(c(185, seq(185, max(height_data), length=100)), 
        c(0, dnorm(seq(185, max(height_data), length=100), mean=175, sd=10)), 
        col=rgb(0.8, 0.2, 0.5, 0.3), border=NA)

# P(165 ≤ height ≤ 185)
plot(density(height_data), col="darkblue", lwd=2, main="P(165 cm ≤ Height ≤ 185 cm)", xlab="Height (cm)")
polygon(c(165, seq(165, 185, length=100), 185), 
        c(0, dnorm(seq(165, 185, length=100), mean=175, sd=10), 0), 
        col=rgb(0.2, 0.5, 0.8, 0.3), border=NA)
```



## Question and Answer 

#### **What is a random variable?**
   - A random variable is a variable that takes on different values based on the outcome of a random experiment.

#### **What is the difference between discrete and continuous random variables?**
   - Discrete random variables can take on countable values, while continuous random variables can take on any value within a range.

#### **How do we calculate the expected value of a discrete random variable?**
   - The expected value (mean) is calculated as \( E(X) = \sum x \cdot P(X = x) \).

#### **What is the purpose of calculating variance and standard deviation?**
   - Variance and standard deviation tell us how much the values of a random variable are spread out from the mean.

#### **How is the probability calculated for a continuous random variable?**
   - The probability for a continuous random variable is calculated by finding the area under the probability density function (PDF) for a given range.



